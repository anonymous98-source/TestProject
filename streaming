Excellent ðŸ‘ â€” adding a right-click context menu makes your app feel professional and desktop-grade.

Weâ€™ll implement this cleanly with:

ðŸŽ¯ Final Behavior

When user right-clicks a row in Category table:

ðŸ”’ Default Category

âŒ Rename (disabled)

âŒ Delete (disabled)

â„¹ Show Info (enabled)


âœ User Category

âœ… Rename

âœ… Delete

â„¹ Show Info



---

âœ… WHAT WE WILL ADD

1. JPopupMenu for category table


2. Smart enable/disable logic


3. Auto row selection on right-click


4. Clean separation inside MainFrame




---

ðŸ”§ STEP 1 â€” Add This Method to MainFrame.java

Add this method anywhere inside MainFrame:


---

âœ… setupCategoryContextMenu() (FULL CODE)

private void setupCategoryContextMenu() {

    JPopupMenu popupMenu = new JPopupMenu();

    JMenuItem renameItem = new JMenuItem("Rename");
    JMenuItem deleteItem = new JMenuItem("Delete");
    JMenuItem infoItem = new JMenuItem("Category Info");

    popupMenu.add(renameItem);
    popupMenu.add(deleteItem);
    popupMenu.addSeparator();
    popupMenu.add(infoItem);

    // ---------- Mouse Listener ----------
    categoryTable.addMouseListener(new java.awt.event.MouseAdapter() {

        @Override
        public void mousePressed(java.awt.event.MouseEvent e) {
            if (e.isPopupTrigger()) showMenu(e);
        }

        @Override
        public void mouseReleased(java.awt.event.MouseEvent e) {
            if (e.isPopupTrigger()) showMenu(e);
        }

        private void showMenu(java.awt.event.MouseEvent e) {

            int row = categoryTable.rowAtPoint(e.getPoint());

            if (row >= 0) {
                categoryTable.setRowSelectionInterval(row, row);

                Category selected =
                        categoryTableModel.getCategories().get(row);

                // Enable/Disable based on lock
                boolean editable = !selected.isLocked();

                renameItem.setEnabled(editable);
                deleteItem.setEnabled(editable);

                popupMenu.show(e.getComponent(),
                        e.getX(), e.getY());
            }
        }
    });

    // ---------- Actions ----------

    renameItem.addActionListener(e -> {
        int row = categoryTable.getSelectedRow();
        if (row < 0) return;

        Category category =
                categoryTableModel.getCategories().get(row);

        String newName = JOptionPane.showInputDialog(
                this,
                "Enter new category name:",
                category.getName()
        );

        if (newName != null && !newName.trim().isEmpty()) {
            category.setName(newName.trim());
            categoryTableModel.fireTableRowsUpdated(row, row);
        }
    });

    deleteItem.addActionListener(e -> {
        int row = categoryTable.getSelectedRow();
        if (row < 0) return;

        int confirm = JOptionPane.showConfirmDialog(
                this,
                "Delete this category?",
                "Confirm Delete",
                JOptionPane.YES_NO_OPTION
        );

        if (confirm == JOptionPane.YES_OPTION) {
            categoryTableModel.removeCategory(row);
        }
    });

    infoItem.addActionListener(e -> {
        int row = categoryTable.getSelectedRow();
        if (row < 0) return;

        Category category =
                categoryTableModel.getCategories().get(row);

        JOptionPane.showMessageDialog(
                this,
                "Category: " + category.getName()
                        + "\nPercentage: " + category.getPercentage()
                        + "\nType: "
                        + (category.isLocked()
                        ? "Default (Locked)"
                        : "User Added (Editable)"),
                "Category Info",
                JOptionPane.INFORMATION_MESSAGE
        );
    });
}


---

ðŸ”§ STEP 2 â€” Call It in createMainContent()

After creating categoryTable, add:

setupCategoryContextMenu();

Example:

categoryTable = new JTable(categoryTableModel);
categoryTable.setRowHeight(28);

setupCategoryContextMenu();


---

ðŸŽ¯ FINAL RESULT

Right-click on a row â†’

If Default:

Rename âŒ disabled

Delete âŒ disabled

Info âœ…


If User:

Rename âœ…

Delete âœ…

Info âœ…



---

ðŸ§  Why This Is Correct Design

âœ” Logic stays in model
âœ” UI adapts dynamically
âœ” No duplicate business logic
âœ” Very professional desktop UX
âœ” Scalable (easy to add more options later)


---

âœ¨ If You Want Next Upgrade

We can enhance it further with:

Icons inside popup menu

Duplicate category

Move up/down ordering

Convert default â†’ user category

Lock/unlock toggle

Percentage quick edit popup


Just tell me ðŸ‘