Perfect ğŸ‘ â€” this is a small but important polish, and weâ€™ll do it cleanly and permanently.

You already have 90% of this done.
Weâ€™ll just make the default INR selection guaranteed (even if locale order changes).


---

âœ… Goal

When the app starts:

Default currency = Indian Rupee (INR)

Symbol shown = â‚¹

Tables & calculations use INR immediately

User can still change currency later



---

âœ… Correct & SAFE Way to Set Default INR

âŒ What we DONâ€™T want

Hardcoding index like currencyCombo.setSelectedIndex(0)

Relying on system locale order


âœ… What we WILL do

Search by currency code = "INR"

Fallback safely if not found



---

ğŸ”§ REQUIRED CHANGE (ONLY IN MainFrame.createHeader())

ğŸ” Replace your existing default-currency code with this

âœ… FINAL, CORRECT CODE

// Currency dropdown
currencyCombo = new JComboBox<>(
        CurrencyProvider.loadAll().toArray(new CurrencyItem[0])
);
currencyCombo.setRenderer(new CurrencyComboRenderer());
currencyCombo.setPreferredSize(new Dimension(240, 28));

// âœ… Force default currency to INR
CurrencyItem inr = null;
for (CurrencyItem item : CurrencyProvider.loadAll()) {
    if ("INR".equals(item.getCode())) {
        inr = item;
        break;
    }
}

if (inr != null) {
    currencyCombo.setSelectedItem(inr);
    CurrencyContext.set(inr);
} else {
    // Fallback: first item (very unlikely, but safe)
    CurrencyContext.set((CurrencyItem) currencyCombo.getSelectedItem());
}

// Update UI on currency change
currencyCombo.addActionListener(e -> {
    CurrencyContext.set((CurrencyItem) currencyCombo.getSelectedItem());
    allocationTable.repaint();
    groupSummaryTable.repaint();
});


---

âœ… Thatâ€™s it â€” nothing else needed

No changes required in:

CurrencyProvider

CurrencyItem

MoneyUtil

Table models

Pie chart

Dialogs



---

ğŸ§  Why this is correct

âœ” Works on any OS / locale
âœ” No fragile assumptions
âœ” INR always selected if available
âœ” Safe fallback
âœ” Professional-grade initialization


---

ğŸ Result

When the app launches, you will see:

ğŸ‡®ğŸ‡³  INR â€“ Indian Rupee (â‚¹)

Already selected âœ”
All amounts formatted in â‚¹ âœ”


---

If you want next:

Persist selected currency across restarts

Auto-detect currency from OS locale

Show symbol next to income input

Currency conversion (live rates)


Just tell me ğŸ‘