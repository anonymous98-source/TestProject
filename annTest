const [form, setForm] = useState({
  id: null,
  title: "",
  message: "",
  severity: "INFO",
  targetRoles: [],
  start_date: null,
  expiry_date: null,
  isActive: "Y",
}); 

useEffect(() => {
  if (!open) return;

  fetchRoles();

  if (record) {
    setForm({
      id: record.id ?? record.announcementId ?? null,
      title: record.title ?? "",
      message: record.message ?? "",
      severity: record.severity ?? "INFO",

      // backend or grid may return targetRole, targetRoles, etc
      targetRoles: record.targetRoles ?? record.targetRole ?? [],

      // IMPORTANT: keep as raw string; DateTimePicker will convert
      start_date: record.startDate ?? record.start_date ?? null,
      expiry_date: record.expiryDate ?? record.expiry_date ?? null,

      isActive: record.isActive ?? record.is_active ?? "Y",
    });
  }
}, [open, record]);
