//  Validate each row
const errors = [];
const validRows = [];

rows.forEach((row, index) => {
  // ðŸ”¹ Skip completely empty rows
  if (isEmptyRow(row)) {
    return; // do not validate or include in validRows
  }

  const {
    rowNumber,
    isValid,
    errors: rowErrors,
  } = validateRow(row, index);

  if (isValid) {
    validRows.push(row);
  } else {
    errors.push({ row: rowNumber, issues: rowErrors });
  }
});




const isEmptyRow = (row) => {
  return Object.values(row).every(
    (val) => val === null || String(val).trim() === ""
  );
};