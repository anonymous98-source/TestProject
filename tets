%% === CLASS DIAGRAM ===
classDiagram
    class User {
        +UUID id
        +String username
        +String email
        +String role
        +Boolean blocked
    }

    class Request {
        +UUID id
        +RequestType type
        +UUID requesterId
        +UUID targetUserId
        +Map payload
        +RequestStatus status
        +Date createdAt
        +Date updatedAt
    }

    class RequestType {
        <<enumeration>>
        CREATE
        EDIT
        BLOCK
        DELETE
    }

    class Permission {
        +UUID id
        +UUID userId
        +Boolean canCreateRequest
        +Boolean canApprove
        +Boolean canReject
        +Boolean canViewRequest
        +Boolean canCancelOwnRequest
    }

    class Approval {
        +UUID id
        +UUID requestId
        +UUID approverId
        +Boolean approved
        +String comments
        +Date actedAt
    }

    User "1" o-- "0..*" Request
    Request "1" o-- "0..*" Approval
    User "1" o-- "0..1" Permission
    Request --> RequestType

%% --------------------------------------------------
%% IMPORTANT: Add exactly one blank line after this
%% --------------------------------------------------

%% === SEQUENCE DIAGRAM ===
sequenceDiagram
    participant A as "Requester (User A)"
    participant S as "System"
    participant B as "Approver (User B)"
    participant DB as "Database"

    Note over A,S: User A creates a request
    A->>S: POST /requests {type, payload}
    S-->>A: 201 Created (requestId)
    B->>S: GET /requests/{id}
    S-->>B: 200 OK