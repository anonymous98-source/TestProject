



classDiagram
direction LR

class User {
  +Long id
  +String name
  +String role
  +createRequest(type, targetUserId)
  +viewRequest(requestId)
  +cancelRequest(requestId)
  +approveRequest(requestId)
  +rejectRequest(requestId)
}

class Request {
  +Long id
  +RequestType type
  +RequestStatus status
  +DateTime createdAt
  +Long createdByUserId
  +Long targetUserId
}

class UserService {
  +createUserRequest(requestorId, type, targetUserId)
  +viewRequest(requestorId, requestId)
  +cancelRequest(requestorId, requestId)
  +approveRequest(actorId, requestId)
  +rejectRequest(actorId, requestId)
}

class RequestType {
  <<enumeration>>
  +CREATE
  +MODIFY
  +DELETE
}

class RequestStatus {
  <<enumeration>>
  +PENDING
  +APPROVED
  +REJECTED
  +CANCELLED
}

User "1" --> "0..*" Request : creates >
UserService --> User : uses >
UserService --> Request : manages >
Request --> User : createdBy >








stateDiagram-v2
    [*] --> PENDING: createRequest(requestor)

    state PENDING {
        [*] --> WaitingApproval
    }

    PENDING --> CANCELLED: cancel(requestor)
    PENDING --> APPROVED: approve(approver)\n[approver != requestor]
    PENDING --> REJECTED: reject(approver)\n[approver != requestor]

    APPROVED --> [*]
    REJECTED --> [*]
    CANCELLED --> [*]

    note right of PENDING
      Requestor:
      - can VIEW
      - can CANCEL
      - cannot APPROVE/REJECT
    end note

    note right of APPROVED
      Approved by another user
      (approver != requestor)
    end note