import javax.swing.*;
import java.awt.*;
import java.io.File;

public class FileHashGeneratorUI extends JFrame {

    private JTextField filePathField;
    private JComboBox<String> algorithmBox;
    private JTextArea resultArea;
    private File selectedFile;

    public FileHashGeneratorUI() {
        setTitle("File Hash Generator");
        setSize(600, 400);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        initUI();
    }

    private void initUI() {
        JPanel panel = new JPanel(new BorderLayout(10, 10));

        // Top panel
        JPanel topPanel = new JPanel(new BorderLayout(5, 5));
        filePathField = new JTextField();
        filePathField.setEditable(false);

        JButton browseBtn = new JButton("Browse");
        browseBtn.addActionListener(e -> chooseFile());

        topPanel.add(filePathField, BorderLayout.CENTER);
        topPanel.add(browseBtn, BorderLayout.EAST);

        // Center panel
        JPanel centerPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        algorithmBox = new JComboBox<>(new String[]{
                "MD5", "SHA-1", "SHA-256", "SHA-384", "SHA-512"
        });

        JButton generateBtn = new JButton("Generate Hash");
        generateBtn.addActionListener(e -> generateHash());

        centerPanel.add(new JLabel("Algorithm:"));
        centerPanel.add(algorithmBox);
        centerPanel.add(generateBtn);

        // Result area
        resultArea = new JTextArea(6, 40);
        resultArea.setLineWrap(true);
        resultArea.setWrapStyleWord(true);
        resultArea.setEditable(false);

        JScrollPane scrollPane = new JScrollPane(resultArea);

        panel.add(topPanel, BorderLayout.NORTH);
        panel.add(centerPanel, BorderLayout.CENTER);
        panel.add(scrollPane, BorderLayout.SOUTH);

        add(panel);
    }

    private void chooseFile() {
        JFileChooser chooser = new JFileChooser();
        int option = chooser.showOpenDialog(this);

        if (option == JFileChooser.APPROVE_OPTION) {
            selectedFile = chooser.getSelectedFile();
            filePathField.setText(selectedFile.getAbsolutePath());
        }
    }

    private void generateHash() {
        if (selectedFile == null) {
            JOptionPane.showMessageDialog(this, "Please select a file first!");
            return;
        }

        try {
            String algorithm = (String) algorithmBox.getSelectedItem();
            String hash = HashService.generateHash(selectedFile, algorithm);
            resultArea.setText(hash);
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(this,
                    "Error generating hash: " + ex.getMessage());
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new FileHashGeneratorUI().setVisible(true));
    }
}